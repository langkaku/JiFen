@{
    ViewBag.Title = "积分管理";
}

<!-- Content Header (Page header)
-->
<section class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h1>@ViewBag.Title</h1>
            </div>
            <div class="col-sm-6">
                <ol class="breadcrumb
float-sm-right">
                    <li class="breadcrumb-item"><a href="#">首页</a></li>
                    <li class="breadcrumb-item active">@ViewBag.Title</li>
                </ol>
            </div>
        </div>
    </div><!-- /.container-fluid -->
</section>
<!-- Main content -->
<section class="content">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <button type="button" class="btn btn-defaul" data-toggle="modal" data-target="#myModal">
                        添加积分
                    </button>
                </div>
                <!-- /.card-header -->
                <div class="card-body">
                    <table id="example2" class="table table-bordered table-hover">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>名称</th>
                                <th>时间</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                    </table>
                </div>
                <!-- /.card-body -->
                <!-- 模态框（Modal） -->
                <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                     aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close float-right" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title" id="myModalLabel">
                                    添加积分
                                </h4>
                            </div>
                            <div class="modal-body">
                                <form class="form-horizontal" action="/article/add" method="post">
                                    <div class="card-body">
                                        <div class="form-group">
                                            <label for="inputEmail3" class="col-sm-2 control-label">标题</label>
                                            <div class="col-sm-10">
                                                <input type="text" class="form-control"
                                                       id="inputEmail3" name="title" placeholder="请输入标题">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>内容</label>
                                        <textarea class="form-control" rows="3" name="content" placeholder="=Enter ..."></textarea>
                                    </div>
                                    <!--
                                    /.card-body -->
                                    <div class="card-footer">
                                        <button type="button" class="btn btn-info"
                                                data-dismiss="modal">
                                            关闭
                                        </button>
                                        <button type="submit" class="btn btn-primary float-right">
                                            确定
                                        </button>
                                    </div>
                                    <!--
                                    /.card-footer -->
                                </form>
                            </div>
                        </div>
                        <!--
                        /.modal-content -->
                    </div>
                    <!-- /.modal
                    -->
                </div>


            </div>
            <!-- /.card -->
        </div>
        <!-- /.col -->
    </div>
    <!-- /.row -->
</section>


@section scripts{
    <!-- ./wrapper -->
    <!-- jQuery -->
    <script src="~/Content/adminLTE/plugins/jquery/jquery.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="~/Content/adminLTE/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- DataTables -->
    <script src="~/Content/adminLTE/plugins/datatables/jquery.dataTables.js"></script>
    <script src="~/Content/adminLTE/plugins/datatables/dataTables.bootstrap4.js"></script>
    <!-- SlimScroll -->
    <script src="~/Content/adminLTE/plugins/slimScroll/jquery.slimscroll.min.js"></script>
    <!-- FastClick -->
    <script src="~/Content/adminLTE/plugins/fastclick/fastclick.js"></script>
    <!-- AdminLTE App -->
    <script src="~/Content/adminLTE/dist/js/adminlte.min.js"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="~/Content/adminLTE/dist/js/demo.js"></script>
    <!-- page script -->
    <script>
        $(function () {
            $('#example2').DataTable({
                paging: true,
                lengthChange: false,
                searching: false,
                ordering: true,
                info: true,
                autoWidth: false,
                serverSide: true,
                iDisplayLength: 15,
                iDisplayStart: 0,
                bStateSave: true,
                pagingType:
                    "full_numbers",
                order: [[0, "desc"]],
                aoColumnDefs: [
                    {
                        "bSortable":
                            false, "aTargets": [1, 2]
                    }
                ],
                ajax: {
                    // url可以直接指定远程的json文件，或是MVC的请求地址 /Controller/Action
                    url:
                        "/article/load",
                    type: 'POST',
                    // 传给服务器的数据，可以添加我们自己的查询参数
                    data: function (param) {
                        param.opportunityNO =
                            'key';
                        return param;
                    }
                },
                language: { //国际化配置
                    "sProcessing":
                        "正在获取数据，请稍后...",
                    "sLengthMenu":
                        "显示 _MENU_条",
                    "sZeroRecords":
                        "无数据",
                    "sInfo":
                        "从 _START_到  _END_ 条记录 总记录数为 _TOTAL_ 条",
                    "sInfoEmpty":
                        "记录数为0",
                    "sInfoFiltered":
                        "(全部记录数_MAX_条)",
                    "sInfoPostFix":
                        "",
                    "sSearch": "搜索",
                    "sUrl":
                        "",
                    "oPaginate": {
                        "sFirst":
                            "第一页",
                        "sPrevious":
                            "上一页",
                        "sNext":
                            "下一页",
                        "sLast":
                            "最后一页"
                    }
                },
                columns: [
                    {
                        "data":
                            "ID"
                    },
                    {
                        "data":
                            "Title"
                    },
                    {
                        "data":
                            function (obj) {
                                return obj.AddTime;
                            }
                    },
                    {
                        "data":
                            function (obj) {
                                return '<button type="button" class="btn btn-default btn-xs" onclick="$(\'#roleid\').val(' + obj.ID +
                                    ');$(\'#myModal2\').modal(\'show\');">修改</button>';
                            }
                    }
                ]
            });
        });
    </script>


}

<!-- 模态框（Modal） -->
<div class="modal fade"
     id="myModal2" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close float-right" data-dismiss="modal"
                        aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    修改积分
                </h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" action="/role/addqx"
                      method="post">
                    <input id="roleid" type="hidden" name="roleid"
                           value="0" />
                    <input id="selectid" type="hidden" name="selectid"
                           value="0" />
                    <div class="card-body">
                        <div class="form-group">
                            <label for="inputEmail3" class="col-sm-2 control-label">配置</label>
                            <div class="col-sm-10">
                                <ul id="treeDemo" class="ztree"></ul>
                            </div>
                        </div>

                    </div>
                    <!-- /.card-body -->
                    <div class="card-footer">
                        <button type="button" class="btn btn-info"
                                data-dismiss="modal">
                            关闭
                        </button>
                        <button type="submit" onclick="GetCheckedAll();" class="btn btn-primary float-right">
                            确定
                        </button>
                    </div>
                    <!-- /.card-footer
                    -->
                </form>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
