
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>员工积分系统</title>
    <style type="text/css">
		.circle_bar {
		    stroke-dasharray:0% 1000; opacity:0;  stroke-linecap:round;
		}

		.backdrop{opacity:0; transition:opacity ease 0.3s;}

		@@keyframes donut {
		    from {
				opacity:1;
		        stroke-dasharray:0% 1000;
		    }
		    to {opacity:1;
		        stroke-dasharray:50% 1000;
		    }
		}
	  @@-webkit-keyframes donut {

	    0% {opacity:1;
	        stroke-dasharray:0% 1000;
	    }
	    100% {	opacity:1;
	         stroke-dasharray:50% 1000;
	    }
	}
	@@-moz-keyframes donut {
	    0% {opacity:1;
	         stroke-dasharray:0% 1000;
	    }
	    100% {opacity:1;
	         stroke-dasharray:50% 1000;
	    }
	}
    </style>

</head>
<body style="background-color:#f6fbfc;">
    <div style="margin-left:350px;margin-top:360px">
        <svg width="565.2" height="565.2" xmlns="http://www.w3.org/2000/svg">
            <circle class="backdrop" r="1" cy="80" cx="90" stroke-width="5" stroke="#2196f3" fill="#2196f3" />
            <circle class="backdrop" r="1" cy="80" cx="150" stroke-width="5" stroke="#2196f3" fill="#2196f3" />

            <circle class="circle_bar" r="90" cy="120" cx="120" stroke-linecap="round" stroke-width="4" stroke="#2196f3" fill="none" />
            <circle class="circle_bar" r="90" cy="120" cx="120" stroke-linecap="round" stroke-width="5" stroke="#fff" fill="none" />

        </svg>
    </div>
    <script src="~/Content/xiaowei/jquery.min.js"></script>
    <script type="text/javascript" src="https://g.alicdn.com/ilw/ding/0.9.2/scripts/dingtalk.js"></script>

    <script>
        window.onload = function () {
            var eye = document.getElementsByClassName('backdrop');
            var face = document.getElementsByClassName('circle_bar');
            var t = null, t2 = null;

            function run() {
                for (var i = 0; i < eye.length; i++) {
                    eye[i].style.opacity = 1;
                    eye[i].style.transition = 'opacity ease 0.1s ' + i * 0.2 + 's';	    //0.2
                }
                face[0].style.animation = 'donut 0.8s linear  0.5s forwards';

                /*if(t>=1)  // 清除眼睛定时器
                {clearTimeout(t);t=null;}*/

                t = setTimeout(function () {
                    for (var i = 0; i < eye.length; i++) {
                        eye[i].style.opacity = 0;
                        eye[i].style.transition = 'opacity ease 0.1s ' + i * 0.2 + 's';   //0.2
                    }
                    eye[1].addEventListener("transitionend", end, false); // 关闭眼睛定时器

                }, 1100); // 笑脸走到一半的时候 消失眼睛   //02+0.5+0.8/2=1.1

                face[1].style.animation = ' donut 0.8s linear 1.1s forwards'
                face[1].addEventListener("animationend", end2, false);  //笑脸开始消失  1.1s

            }
            run(); // 执行动画

            function end(e)   // 清除眼睛定时器
            {
                if (e.propertyName == 'opacity')	  //  透明度属性过渡完成 执行
                {
                    if (t) {
                        //console.log(t);
                        clearTimeout(t); t = null;
                    }
                    this.removeEventListener("transitionend", end);
                }
            } ///----------------------------end 函数使用 57,58行代替 更便捷

            function end2(e) {
                if (e.animationName == "donut") {
                    // 清除动画 回归最初状态
                    /*eye[0].style.transition='';
                    eye[1].style.transition='';*/
                    face[1].style.animation = '';
                    face[1].style.opacity = 0;
                    face[0].style.animation = '';
                    face[0].style.opacity = 0;
                    this.removeEventListener("animationend", end2);
                    if (t2) clearTimeout(t2);
                    t2 = setTimeout(run, 10);
                }
            }
        }
    </script>
    <script>
        //$(function () {
        //    $('input').iCheck({
        //        checkboxClass: 'icheckbox_square-blue',
        //        radioClass: 'iradio_square-blue',
        //        increaseArea: '20%' // optional
        //    })
        //});
        //dd.config({
        //    agentId:'207403900', // 服务端传来的congfig信息
        //    corpId: 'ding63597953bd719a95',
        //    timeStamp: '1543830180',
        //    nonceStr: '209209',
        //    signature: "123432432432",
        //    jsApiList: [ // 所有需要使用到的jsapi需要在config的时候进行注册，写在这里。
        //        'runtime.info',
        //        'biz.user.get',
        //        'biz.contact.choose',
        //        'biz.telephone.call',
        //        'biz.ding.post']
        //});




    </script>
    <script>
        //dd.ready(function () {
        //    var corpId = "ding63597953bd719a95";
        //    dd.runtime.permission.requestAuthCode({
        //        corpId: corpId,
        //        onSuccess: function (result) {
        //            var code = result.code;
        //            $.post("Login/GetCode", { "code": code }, function (data) {
        //                if (data = "ok") {
        //                    //setTimeout(window.location.href = "/Firstpage/Index", 3000); // 5 seconds
                        
        //                        function show_popup() {
        //                            window.location.href = "/Firstpage/Index";
        //                        };
        //                     window.setTimeout(show_popup, 2000); // 5 seconds
                         
        //                } else {
        //                    alert("对不起，您登录权限。");
        //                }
        //            });
        //        },
        //        onFail: function (err) {
        //            $.alert(JSON.stringify("err"));
        //        }
        //    });
        //});
        $(document).ready(function () {
            //setTimeout(window.location.href = "/Firstpage/Index", 3000);
            $(window).load(function () {
                function show_popup() {
                    window.location.href = "/Firstpage/Index";
                };
                window.setTimeout(show_popup, 3200); // 5 seconds
            })
        });
    </script>
</body>
</html>

